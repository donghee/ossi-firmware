<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <title>Ossi-firmware by donghee</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Ossi-firmware</h1>
        <h2></h2>

        <section id="downloads">
          <a href="https://github.com/donghee/ossi-firmware/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/donghee/ossi-firmware/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/donghee/ossi-firmware" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <p>OSSIREADME </p>

<p>OSSI-1 인공위성 사용방법</p>

<h2>BEACON 사용법</h2>

<ol>
<li>
<p>BEACON은 144.25MHZ 에서 12wpm 으로 CW를 신호를 내보낸다. CW는 모스코드로 인코딩 되어 있다
CW 신호의 내용은 'OSSI/1' 와 인공위성 기본정보를 보낸다.</p>

<p>첫번째(6개 바이트) 인공위성 이름</p>

<pre><code>OSSI/1 
</code></pre>

<p>두번째(5개 바이트) 형식: 1 space errorflag space powerOn</p>

<pre><code>1 0b10100 0b11111 (비트순서:EPS(BATTERY), OBC, BEACON, COMMS, Payload)
</code></pre>

<p>세번째(5개 바이트) 형식: 2 space solarvoltage space batteryvoltage</p>

<pre><code>2 0b11111111 0b11111111
</code></pre>

<p>각 문장은 Space Space Space 로 구분한다.</p>
</li>
<li><p>신호읽기
OSSI 사이트를 보고 인공위성이 자신의 상공을 지나갈때 무전기를 꺼내어 144.25MHZ를 맞추어 귀로 들으면 된다.</p></li>
<li><p>인공위성 찾기
144.25MHZ에서 CW신호에서 나오는 OSSI/1을 찾아 듣는다. </p></li>
</ol><h2>COMMS의 동작</h2>

<p>지상에서 435.75MHZ로 2FSK로 다음 패킷을 보낸다.</p>

<pre><code>from ossi import Uplink, Downlink, Request

u = Uplink(435.75, '2FSK', 1200)
d = Downlink(435.75, '2FSK', 9600)
request = Request(u, d)

# EPS
## 온도 
temp = request.getBatteryTemperature()
temp = request.getPannelTemperature()
x1_temp = request.getSolarPannelTemperature(X,1)
z1_temp = request.getSolarPannelTemperature(Z,1)
y1_temp = request.getSolarPannelTemperature(Y,1)

## volatge
v = request.getBatteryVoltage()
v = request.getSolarPannelVoltage()

## solar sensor
s = request.getSolarSensor()

## 충전 정보
check = request.checkBatteryCharge()


## 솔라, 배터리, SC 켜져 있는가?
check = request.checkSolarOn()
check = request.checkBatteryOn()
check = request.checkSuperCapOn()

## 수퍼캡 
status = request.doSuperCapOn()
check = request.checkSuperCapCharge()

## EPS reset!
request.resetEPS()

# OBC
## OBC reset!
request.resetOBC()

## 자이로
l = request.getGyro()

## RTC 시간 가져오기 
time = request.getRtcTime()
status = request.setRtcTime(datetime.datetime.now())

## Payload LED
reserveStatus = request.reserveMessage("OSSI 1", datetime.datetime(2012, 12, 12, 12, 12))
reserveList = request.getReserveList()

request.ledOn()
request.ledOFF()

## 안테나 펴졌는지?
check = request.checkAntDeploy()
## 안테나 펴기
request.antDeploy()

request.resetPayload()

# COMMS
request.resetCOMMS()

# BEACON
request.resetBEACON()

# STORAGE(EEPROM, FRAM)
status = request.setByteEEPROM(1, 'x')
</code></pre>

<p><a href="http://swisscube-live.ch/Publish/S3-D-ICD-1-0a-Housekeeping_ICD.pdf">http://swisscube-live.ch/Publish/S3-D-ICD-1-0a-Housekeeping_ICD.pdf</a></p>

<h3>패킷 포멧</h3>

<p>예제 TX 패킷</p>

<p>OxAA, 0xAA, 0xAA, 0xAA, 0xD3, 0x91, 0xAA, 0xAA, 0xAA, '1', '2', '3', '4', '5', '6', 0xAA, 0xAA, 0XAA</p>

<p>p1, p2, p3, p4, s1, s2, len, command1, c2, c3, d1~dn, crc</p>

<h4>ax.25</h4>

<p><a href="http://swisscube-live.ch/Publish/S3-BC-SE-1-1b-AX.25%20Transfer%20Frames%20Format.pdf">http://swisscube-live.ch/Publish/S3-BC-SE-1-1b-AX.25%20Transfer%20Frames%20Format.pdf</a></p>

<p><img src="http://i.imgur.com/MygEt.png" alt=""></p>

<ul>
<li>01111110 # flag</li>
<li>callsign 48bits # destination</li>
<li>ssid 8bit 011ssid0</li>
<li>callsign 48bits # source</li>
<li>ssid 8bit 011ssid0</li>
<li>control bits 00000011</li>
<li>protocal identifier 0xF0</li>
<li>Information field(32-2048)</li>
<li>Frame-Check Sequence</li>
<li>01111110 # flag</li>
</ul><p><strong>Information field</strong></p>

<p><img src="http://i.imgur.com/Xdnas.png" alt=""></p>

<ul>
<li>version number: 00</li>
<li>virtual channel Id: 000</li>
<li>spare: 000</li>
<li>master frame count 0x00</li>
<li>virtual channel frame count 0x00</li>
<li>first header pointer 0x00</li>
<li>data </li>
<li>time flag 0b000</li>
<li>spare 00</li>
<li>tc count 00</li>
<li>time </li>
</ul><h2>UART로 통신하기</h2>

<p>OBC에 있는 인터페이스를 통해서 다른 모듈을 제어 할 수 있다. </p>

<p>인터페이스는 동일 </p>

<pre><code>from ossi import Serial Request

s = Serial('Com3', 9600)
request = Request(s)
</code></pre>

<h2>인공위성 dashboard</h2>

<p><img src="http://www.devco.net/images/gdash-small.png" alt=""></p>

<p><a href="https://github.com/ripienaar/graphite-graph-dsl/wiki">https://github.com/ripienaar/graphite-graph-dsl/wiki</a></p>
      </section>
    </div>

    
  </body>
</html>